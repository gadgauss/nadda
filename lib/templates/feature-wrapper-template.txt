var fs = require('fs'),
	path = require('path'),
	Yadda = require('yadda'),
	NY_PATH = '{ny_path}',
	yaddaInstance = require(path.resolve(NY_PATH, 'sandbox/steps-lib')),
	featureParser = new Yadda.parsers.FeatureParser(),
    feature = featureParser.parse(fs.readFileSync('{feature_location}', 'UTF-8'));

function createScenarioFunc(scenario) {
	return function (browser) {
		scenario.steps.push('close_browser');
		yaddaInstance.yadda(scenario.steps, {browser: browser});
	};
}

for (var j = 0, sl = feature.scenarios.length; j < sl; j++) {
	scenario = feature.scenarios[j];
	module.exports[scenario.title] = createScenarioFunc(scenario);
}
